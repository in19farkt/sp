(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t){},127:function(e,t){},128:function(e,t,n){"use strict";n.r(t);n(95);var a=n(0),r=n.n(a),o=n(11),l=n.n(o),c=n(189),i=n(35),s=n(13),u=n(178),m=n(192),p=n(182),d=n(183),g=n(184),h=n(196),E=n(185),f=n(193),b=n(191),v=n(133);class C extends r.a.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error(e,t)}render(){const{hasError:e,error:t}=this.state,{children:n}=this.props;return e?r.a.createElement("div",null,r.a.createElement("h1",null,"Something went wrong."),r.a.createElement("pre",null,t.toString())):n}}n(46);var x=n(48);const y="#f8f8f8",S="#EFEBF7",k=Object(x.a)(),P=Object(x.a)({overrides:{MuiCssBaseline:{"@global":{html:{boxSizing:"border-box",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:16,fontFamily:"OpenSans, sans-serif"},body:{margin:0,fontSize:"1rem",backgroundColor:y},"html, body, #root":{height:"100%"},"#root":{zIndex:1,position:"relative"},"*, *::before, *::after":{boxSizing:"inherit"},"@media print":{body:{backgroundColor:"#fff"}},"#walletconnect-wrapper":{zIndex:k.zIndex.modal,position:"relative"}}}}});var w=n(47);Object(w.a)(e=>({root:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"0.25rem",backgroundColor:S,textAlign:"center","&$isSmall":{padding:e.spacing(.5,1.5),minHeight:e.spacing(4)},"&$isMedium":{padding:e.spacing(1.5,3),minHeight:e.spacing(6)}},isSmall:{},isMedium:{}}));n(188),n(187);Object(w.a)({linearProgress:{flexGrow:1}});var j=n(80),z=n(81),F=n.n(z),O=n(190);const R=Object(w.a)({icon:{fontSize:20}});function _(e){const{children:t}=e,n=R(),r=a.createRef(),o=a.useCallback(e=>()=>{r.current&&r.current.closeSnackbar(e)},[r.current]),l=a.useMemo(e=>()=>a.createElement(O.a,{key:"close","aria-label":"close",color:"inherit",onClick:o(e)},a.createElement(F.a,{className:n.icon})),[o,n]);return a.createElement(j.SnackbarProvider,{maxSnack:3,ref:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},action:l},t)}var I=n(63),V=n.n(I);const D={home:null,price:{supplier:Object(I.getParam)(null)},demo:null},$=V()(D);function N(){return a.createElement(s.b,{path:"/:page"},({match:e})=>a.createElement(f.a,{value:e&&e.params.page||"home"},a.createElement(E.a,{label:"Home",component:i.b,value:$.home.getElementKey(),to:$.home.getRedirectPath()}),a.createElement(E.a,{label:"Price",component:i.b,value:$.price.getElementKey(),to:$.price.getRedirectPath()}),!1))}function M(){return a.createElement(u.a,{position:"static"},a.createElement(p.a,null,a.createElement(N,null)))}function H(){return a.createElement("div",null,a.createElement(v.a,null,"Home page"))}var A,B=n(40),J=n(19),K=n.n(J);function G(e){return e.replace(/"/g,"")}function L(e){return e.replace(/\//g,"\\").slice(0,2500)}function T(e,t){return e&&e.split("\n").map(e=>L(e.trim())).filter(e=>{var n;return!!e&&!(null===(n=t)||void 0===n?void 0:n.test(e))}).join("; ")}function W(e){return Object(B.a)(this,void 0,void 0,(function*(){return new Promise((t,n)=>{const a=new FileReader;a.onabort=n,a.onerror=n,a.onload=e=>{var a;return(null===(a=e.target)||void 0===a?void 0:a.result)&&"string"!=typeof e.target.result?t(K.a.read(e.target.result,{type:"buffer",codepage:1251})):n(new Error("File parsing failed"))},a.readAsArrayBuffer(e)})}))}function q(e,t){K.a.writeFile(e,`${(new Date).toLocaleDateString()} - ${t} - Прайс.xlsx`)}!function(e){e[e.VendorCode=0]="VendorCode",e[e.Name=1]="Name",e[e.Price=2]="Price",e[e.Category=3]="Category",e[e.Sizes=4]="Sizes",e[e.Color=5]="Color",e[e.Features=6]="Features",e[e.Description=7]="Description",e[e.Images=8]="Images"}(A||(A={}));const Q=/^(размер:|цвет:).+$/i;function U(){const[e,t]=a.useState(null),n=a.useCallback(e=>{const n=e.target.files&&e.target.files[0];t(n)},[]);return a.useEffect(()=>{(()=>Object(B.a)(this,void 0,void 0,(function*(){if(!e)return;const t=yield W(e),n=K.a.utils.sheet_to_json(t.Sheets.Sheet1).map(e=>({[A.VendorCode]:e["Артикул"],[A.Name]:G(e["Наименование"]),[A.Price]:Math.ceil(e["Цена, руб."]),[A.Category]:Y(e["Ссылка"]),[A.Sizes]:Z(e["РАЗМЕР"]),[A.Color]:e["ЦВЕТ"],[A.Features]:T(e["Все характеристики"],Q),[A.Description]:L(e["Описание"]||""),[A.Images]:e["Изображение"]})),a=K.a.utils.json_to_sheet(n,{skipHeader:!0}),r=K.a.utils.book_new();K.a.utils.book_append_sheet(r,a,"Sheet1"),q(r,"Пальто Пенза")})))()},[e]),a.createElement(g.a,{container:!0,spacing:2},a.createElement(g.a,{item:!0},a.createElement(v.a,null,"Выгрузка Turbo.Parser (.csv):")),a.createElement(g.a,{item:!0},a.createElement("input",{type:"file",onChange:n,accept:".csv"})),a.createElement(g.a,{item:!0}))}const X={"kurtki-demisezonnye":"Куртки демисезонные","kurtki-uteplyennye":"Куртки утепленные","palto-demisezonnoe":"Пальто демисезонное","palto-uteplyennoe":"Пальто утепленное",plashchi:"Плащи",rasprodazha:"Распродажа"};function Y(e){const t=e.replace(/^.+?\/catalog\/(.+?)\/.+$/,"$1"),n=X[t];return n||console.error(`Не известная категория: ${e}`),n||""}function Z(e){return String(e).replace(/\//g,"-").replace(/;/g,"/")}const ee=Object(w.a)({selector:{width:200}}),te=[{value:"palto-penza",label:"Пальто Пенза"},{value:"optolider",label:"ОптоЛидер"},{value:"saks",label:"САКС Игрушки"}];const ne=Object(s.g)((function(e){const{match:t}=e,n=ee();return a.createElement(b.a,{select:!0,label:"Выберите поставщика",value:t.params.supplier,className:n.selector,variant:"outlined"},te.map(e=>a.createElement(h.a,{component:i.b,key:e.value,value:e.value,to:$.price.supplier.getRedirectPath({supplier:e.value})},e.label)))}));function ae(){return a.createElement(g.a,{container:!0,spacing:2},a.createElement(g.a,{item:!0},a.createElement(v.a,null,"Coming Soon")))}var re,oe=n(194);function le(){const[e,t]=a.useState(null),[n,r]=a.useState(null),o=a.useCallback(e=>{const n=e.target.files&&e.target.files[0];t(n)},[]),l=a.useCallback(e=>{const t=e.target.files&&Array.from(e.target.files);r(t)},[]);return a.useEffect(()=>{(()=>Object(B.a)(this,void 0,void 0,(function*(){var t;if(!e||!(null===(t=n)||void 0===t?void 0:t.length))return;const a=yield W(e),r=yield Promise.all(n.map(e=>W(e)));let o=Object(oe.a)((e,t)=>e[re.VendorCode]===t[re.VendorCode],ie(a));const l=Object(oe.a)((e,t)=>e[re.VendorCode]===t[re.VendorCode],r.map(e=>ie(e)).flat());o=o.map(e=>{const t=l.findIndex(t=>t[re.VendorCode]===e[re.VendorCode]);return-1!==t?l.splice(t,1)[0]:e}).concat(l).filter(e=>!!e[re.Price]);const c=K.a.utils.json_to_sheet(o,{skipHeader:!0}),i=K.a.utils.book_new();K.a.utils.book_append_sheet(i,c,"Sheet1"),q(i,"ОптоЛидер")})))()},[e,n]),a.createElement(g.a,{container:!0,spacing:2},a.createElement(g.a,{item:!0,xs:4},a.createElement(v.a,null,"Выгрузка всех товаров (один файл .xls):")),a.createElement(g.a,{item:!0,xs:8},a.createElement("input",{type:"file",onChange:o,accept:".xls"})),a.createElement(g.a,{item:!0,xs:4},a.createElement(v.a,null,"Выгрузка по частям (несколько файлов .xls):")),a.createElement(g.a,{item:!0,xs:8},a.createElement("input",{type:"file",onChange:l,accept:".xls",multiple:!0})))}!function(e){e[e.VendorCode=0]="VendorCode",e[e.Name=1]="Name",e[e.Price=2]="Price",e[e.Category=3]="Category",e[e.Color=4]="Color",e[e.Description=5]="Description",e[e.Features=6]="Features",e[e.Images=7]="Images"}(re||(re={}));const ce=/^(Дропшиппинг|от \d+? шт).+$/i;function ie(e){return K.a.utils.sheet_to_json(e.Sheets[e.SheetNames[0]]).map(e=>({[re.VendorCode]:se(e["Ссылка"]),[re.Name]:G(e["Наименование"]),[re.Price]:Math.ceil(e["Цена, руб."]),[re.Category]:e["Название раздела"],[re.Color]:ue(e["ЦВЕТ"]||""),[re.Description]:L(e["Описание"]||""),[re.Features]:T(e["Все характеристики"]||"",ce),[re.Images]:e["Изображение"]}))}function se(e){return e.replace(/^.+?\/product\/(.+?)\//,"$1")}function ue(e){return e.replace(/,/g,"/")}function me(){return a.createElement(g.a,{container:!0,spacing:2},a.createElement(g.a,{item:!0,xs:12},a.createElement(g.a,{container:!0,spacing:2},a.createElement(g.a,{item:!0},a.createElement(v.a,{variant:"h4"},"Обработка прайсов")),a.createElement(g.a,{item:!0},a.createElement(ne,null)))),a.createElement(g.a,{item:!0,xs:12},a.createElement(s.d,null,a.createElement(s.b,{exact:!0,path:$.price.supplier.getRedirectPath({supplier:"palto-penza"}),component:U}),a.createElement(s.b,{exact:!0,path:$.price.supplier.getRedirectPath({supplier:"optolider"}),component:le}),a.createElement(s.b,{exact:!0,path:$.price.supplier.getRedirectPath({supplier:"saks"}),component:ae}))))}function pe(){return a.createElement(a.Fragment,null,a.createElement(M,null),a.createElement(m.a,{clone:!0,mt:{xs:2,lg:3}},a.createElement(p.a,null,a.createElement(s.d,null,!1,a.createElement(s.b,{exact:!0,path:$.price.getRoutePath()},a.createElement(s.a,{to:$.price.supplier.getRedirectPath({supplier:"palto-penza"})})),a.createElement(s.b,{exact:!0,path:$.price.supplier.getRoutePath(),component:me}),a.createElement(s.b,{exact:!0,path:$.home.getRoutePath(),component:H}),a.createElement(s.a,{to:$.home.getRedirectPath()})))))}class de{}const ge=r.a.createContext(null);var he;he=r.a.createElement((function(){const e=new de;return r.a.createElement(C,null,r.a.createElement(i.a,{basename:"/sp"},r.a.createElement(_,null,r.a.createElement(c.a,{theme:P},r.a.createElement(ge.Provider,{value:e},r.a.createElement(d.a,null),r.a.createElement(pe,null))))))}),null),l.a.render(he,window.document.getElementById("root"))},79:function(e,t){}},[[128,1,2]]]);